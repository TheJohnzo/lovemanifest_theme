(function(e){e.fn.ratio=function(h){function l(c,a){var h=this,d=e(c),k;d.data("ratio-valign")&&(a.vAlign=d.data("ratio-valign"));a.vAlign=e(a.vAlign,d);a.vAlign.length&&a.vAlign.addClass("ratio-valign");d.data("ratio-maxwidth")&&(a.maxWidth=d.data("ratio-maxwidth"));a.ratios.length=0;d.data("ratio")&&(a.ratios.md=d.data("ratio"),a.ratios.length++);for(size in a.ratioSizes){var f=size+"ratio";d.data(f)&&(a.ratios[size]=d.data(f),a.ratios.length++)}a.ratios.md&&(f=a.ratios.md.split(":"),a.width=parseInt(f[0]),
    f[1]&&(a.height=parseInt(f[1])));a.maxWidth||(a.maxWidth=a.width);a.ratios.md||(a.ratios.md=a.width+":"+a.height+":"+a.width/a.height);a.height&&(c.style.height=a.height+"px");e.extend(this,a,{runonce:!1,shouldScale:function(){var g=0,b=d.outerWidth();b<this.width?g=b:b>this.width&&this.width!=this.maxWidth?g=b>this.maxWidth?this.maxWidth:b:this.runonce||(g=a.width||b);g&&(this.width=g);return g},doScale:function(){var a=this.shouldScale();return a?(this.setRatioSize(),c.style.height=a/this.ratio+
    "px",this.bgImg&&(c.style.backgroundSize="auto "+c.style.height),this.doVAlign(),!0):!1},setRatioSize:function(){if(1<this.ratios.length){var a=this.viewportWidth(),b="md";for(size in this.ratioSizes)if(this.ratios[size]&&(a<this.ratioSizes[size]||!this.ratioSizes[size])){b=size;break}b!=this.ratioSize&&(this.ratioSize=b,this.ratio=this.getRatio(b))}},getRatio:function(a){var b=this.ratios[a].split(":"),c;b[2]?c=parseInt(b[2]):(b[1]||(b[1]=d.height()),c=parseInt(b[0])/parseInt(b[1]),this.ratio[a]=
    b[0]+":"+b[1]+":"+c);return c},viewportWidth:function(){var a=window,b="inner";"innerWidth"in window||(b="client",a=document.documentElement||document.body);return a[b+"Width"]},doVAlign:function(){if(this.vAlign&&1===this.vAlign.length){var a=this.vAlign.outerHeight(),b=parseInt(c.style.height)||d.outerHeight();a<b?this.vAlign.css({"margin-top":(b-a)/2+"px","margin-bottom":0}):a==b?this.vAlign.css({"margin-top":0,"margin-bottom":0}):this.vAlign.css({"margin-top":"","margin-bottom":""})}}});this.ratio||
(this.ratio=this.getRatio("md"));e(window).on("resize",function(){clearTimeout(k);k=setTimeout(function(){h.doScale()},500)});this.doScale();this.runonce=!0;d.data("ratioScaler",this)}this.each(function(){var c={width:e(this).width(),height:e(this).height(),ratio:!1,ratioSize:"md",ratioSizes:{xs:420,sm:768,md:1200,lg:0},ratios:{},maxWidth:!1,bgImg:!1,vAlign:""};h&&e.extend(c,h);new l(this,c)});return this}})(jQuery);