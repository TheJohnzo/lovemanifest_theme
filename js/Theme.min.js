Theme = (function(window, $) {

    var self = {};

    self.parentHeights = [];
    self.viewPort = {width: 0, height: 0};

    var parentHeightTimeout = 0;

    self.$_GET = function(name) {
        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
            results = regex.exec(location.search);
        return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
    }

    self.inheritParentHeight = function() {
        clearTimeout(parentHeightTimeout);

        parentHeightTimeout = setTimeout(function() {
            setViewport();
            $.each(self.parentHeights, function(i, targets) {
                targets.each(function() {
                    this.style.height = '';
                    if(self.viewPort.width > 767) {
                        this.style.height = $(this).parent().css('height');
                    }
                });
            });
        }, 100);
    }
    $(window).on('resize load', function() { self.inheritParentHeight(); });

    function setViewport() {
        var e = window, a = 'inner';
        if (!('innerWidth' in window )) {
            a = 'client';
            e = document.documentElement || document.body;
        }
        self.viewPort = { width : e[ a+'Width' ] , height : e[ a+'Height' ] };
    }
    //  Run once, so the viewport can be accessed before Document Ready
    setViewport();

    $(document).on('ready', function() {
        // Make sure all parent height objects are jQuery objects
        $.each(self.parentHeights, function(i, selector) {
            self.parentHeights[i] = $(selector);
        });
    });

    return self;

})(this, jQuery);