(function(d){function j(a){d.extend(this,{o:a,jQo:d(a),toggles:d(a).find(".toggle"),valid:!1,aPolyfills:["number"],sPolyfills:["required","pattern","email"],checks:{date:"type",time:"type",pattern:"attr",email:"type",required:"attr",number:"type"},inputs:d(a).find("input"),hiddenparts:d(a).find(".hidden"),required:[],pattern:[],email:[],date:[],time:[],number:[],sendAJAX:k,tagdata:f,toggleMatch:l})}function m(a,b,e){d.extend(this,{form:e,o:b,jQo:d(b),onFocus:n,onBlur:p,tagdata:f,charLimit:q})}function r(a,
b){if(f("matchgroup",b)){var e=f("matchgroup",b);d.extend(this,{toggle:d(b),slaves:[]});a.matchGroups||(a.matchGroups={});a.matchGroups[e]=this;d(b).on("click",function(){a.toggleMatch(e)})}}function k(a){var b=this.o.action,e=this.jQo.serialize(),h="json",c=this;""!=c.tagdata("submit-type")&&(h=c.tagdata("submit-type"));d.ajax({type:"post",url:b,dataType:h,data:e,success:function(){switch(a){case "redirect":var d=""==c.tagdata("redirect")?b:c.tagdata("redirect");window.parent.location=d}}})}function n(){"submit"!=
this.o.getAttribute("type")&&this.o.select();this.form.jQo.addClass("active");this.jQo.data("start",this.o.value)}function p(){this.form.jQo.removeClass("active")}function s(){if("no"!=f("matchfilled",this.matchTo)){if("undefined"==typeof this.toggleActive||this.toggleActive)this.matchTo.value=this.o.value}else if(""==this.matchTo.value&&("undefined"==typeof this.toggleActive||this.toggleActive))this.matchTo.value=this.o.value}function l(a){var b=this.matchGroups[a].toggle,e=b.hasClass("active");
e?(b.removeClass("active"),e=!1):(b.addClass("active"),e=!0);d.each(this.matchGroups[a].slaves,function(a,c){var b=c.jQo.data("F_Ctrl");(b.toggleActive=e)?b.update_matching():b.matchTo.value=""})}function q(a){this.o.value.length>a?this.o.value=this.o.value.substring(0,a):this.jQo.siblings(".remLen").html(a-this.o.value.length)}function f(a,b){"undefined"==typeof b&&(b=this.o);return b.dataset&&b.dataset[a]?b.dataset[a]:null!=b.getAttribute("data-"+a)?b.getAttribute("data-"+a):""}function g(a){a.stopPropagation?
a.stopPropagation():a.cancelBubble=!0;a.preventDefault?a.preventDefault():a.returnValue=!1}d.fn.anticsForm=function(){if(1>this.length)return this;this.each(function(){var a=new j(this);d(this).data("Antics_Form",a);for(val in a.checks){var b;a:{b=val;switch(a.checks[val]){case "attr":b=b in document.createElement("input");break a;case "type":var e=document.createElement("input");e.setAttribute("type",b);b="text"!==e.type;break a}b=void 0}b||a.aPolyfills[val]||a.aPolyfills.push(val)}a.toggles.length&&
d.each(a.toggles,function(){new r(a,this)});a.jQo.submit(function(a){var c=d(this).data("Antics_Form");c.valid=!0;d.each(c.sPolyfills,function(a,b){c[b]&&d.each(c[b],function(a,d){var e=d[b]();d.o.validity&&(d.o.validity.valid=e);e||(c.valid=!1)})});c.valid&&""!=c.tagdata("ajax")?(g(a),c.sendAJAX(c.tagdata("ajax"))):c.valid||g(a)});d(this).find("input, textarea").each(function(b){var c=new m(b,this,a);for(val in a.checks){var e=-1!==d.inArray(val,a.aPolyfills);b=t[val];switch(a.checks[val]){case "attr":null!=
c.o.getAttribute(val)&&(a[val].push(c),c[val]=b.fn);break;case "type":if(c.o.getAttribute("type")==val){if("load"==b.a&&e){if(e=!0,b.cond&&(e=b.cond(a)),0===a[val].length&&e){var f=b;d.getScript(f.s,function(){f.cb(a)})}}else if(c[val]=b.fn,e)c.jQo.on(b.a,function(a){c[val](a)});a[val].push(c)}}}d(this).data("F_Ctrl",c);c.jQo.on("focus",function(){c.onFocus()});c.jQo.on("blur",function(){c.onBlur()});""!=c.tagdata("matchto")&&(c.matchTo=document.getElementById(c.tagdata("matchto")),c.update_matching=
s,c.jQo.on("blur",function(){c.update_matching()}),c.tagdata("matchgroup")&&a.matchGroups[c.tagdata("matchgroup")]&&(c.toggleActive=d(a.matchGroups[c.tagdata("matchgroup")].toggle).hasClass("active"),a.matchGroups[c.tagdata("matchgroup")].slaves.push(c)));if(""!=c.tagdata("charlimit"))c.jQo.on("keyup",function(){c.charLimit(c.tagdata("charlimit"))})})})};var t={required:{a:"blur",fn:function(){return""==this.o.value?!1:!0}},email:{a:"keydown",fn:function(){var a=this.o.value,b=a.indexOf("@"),d=a.lastIndexOf(".");
return 1>b||d<b+2||d+2>=a.length?!1:!0}},pattern:{a:"blur",fn:function(){var a=RegExp(this.o.getAttribute("pattern"));return null===this.o.value.match(a)?!1:!0}},number:{a:"keydown",fn:function(a){-1===d.inArray(a.keyCode,[8,9,13,48,49,50,51,52,53,54,55,56,57,190])&&g(a)}}};d.fn.serializeObject=function(){var a={},b=this.serializeArray();d.each(b,function(){void 0!==a[this.name]?(a[this.name].push||(a[this.name]=[a[this.name]]),a[this.name].push(this.value||"")):a[this.name]=this.value||""});return a}})(jQuery);